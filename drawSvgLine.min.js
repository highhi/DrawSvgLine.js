 /*
 *  drawSvgLine.js
 *
 * https://github.com/highhi/DrawSvgLine.js
 *
 * Copyright (c) 2015 Kazuya Mizuno
 *
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 */

!function(e,t){"use strict";"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(t):e.DrawSvgLine=t()}(this,function(){"use strict";function e(t,a){if(!(this instanceof e))return new e(t);var r=this,i=a||{};r.elm="string"==typeof t?document.querySelector(t):t,r.paths=r.elm.querySelectorAll("path"),r.pathsLen=r.paths.length,r.totalLength=[],r.currentFrame=0,r.strokeSpeed=i.strokeSpeed?i.strokeSpeed*n:1e3*n,r.fillSpeed=i.fillSpeed?i.fillSpeed*n:1e3*n,r.delay=i.delay?i.delay:0,r.fixfox=i.fixfox?i.fixfox:300;for(var o=0;o<r.pathsLen;o++){var s=r.paths[o].getTotalLength()+30;isNaN(s)&&(s=r.fixfox),r.totalLength[o]=s,r.paths[o].style.strokeDasharray=s+" "+s,r.paths[o].style.strokeDashoffset=s,r.paths[o].style.fillOpacity=0}}var t=requestAnimationFrame||mozRequestAnimationFrame||webkitRequestAnimationFrame||msRequestAnimationFrame||setTimeout,a=cancelAnimationFrame||mozCancelAnimationFrame||webkitCancelAnimationFrame||msCancelAnimationFrame||clearTimeout,r=16,n=.06;return e.prototype.draw=function(){var e=this;return e._stroke(),e},e.prototype._stroke=function(){var e=this,n=e.currentFrame/e.strokeSpeed,i=null;if(n>1)a(i),e.currentFrame=0,setTimeout(e._fill(),e.delay);else{e.currentFrame++;for(var o=0;o<e.pathsLen;o++)e.paths[o].style.strokeDashoffset=e.totalLength[o]*(1-n)|0;i=t(e._stroke(),r)}},e.prototype._fill=function(){var e=this,n=e.currentFrame/e.fillSpeed,i=null;if(n>1)a(i),e.currentFrame=0,this.callback&&this.callback();else{e.currentFrame++;for(var o=0;o<e.pathsLen;o++)e.paths[o].style.fillOpacity=n;i=t(e._fill(),r)}},e.prototype.compleat=function(e){"function"==typeof e&&(this.callback=e)},e});